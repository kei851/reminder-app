# リマインダーシステム

柔軟なリマインド設定と Slack スレッド対応のリマインダーシステム

## セットアップ

### 1. Google Sheets の準備

以下の 3 つのシートを作成：

#### リマインダー設定

| A 列       | B 列     | C 列             | D 列           |
| ---------- | -------- | ---------------- | -------------- |
| 期日       | 名前     | リマインダー種類 | スレッドリンク |
| 2025-07-15 | 田中太郎 | Pitch会          | (自動入力)     |

#### すべてのslackメンバー

| A 列     | B 列 | C 列      | D 列 | E 列         |
| -------- | ---- | --------- | ---- | ------------ |
| id       | name | name_only | -    | name_26only  |
| U1234567 | -    | 田中太郎  | -    | -            |

#### リマインド文マスター

| A 列    | B 列           | C 列     | D 列                                  | E 列               |
| ------- | -------------- | -------- | ------------------------------------- | ------------------ |
| セット名| リマインダー名 | タイミング| 文章                                  | デフォルトチャンネル|
| Pitch会 | Pitch会(22日前)| 22日前   | 📝 初稿提出を{DEADLINE}にお願いします | #pitch-general     |

**メッセージのテンプレート変数**:

- `{DEADLINE}` - 自動で期日詳細に置換
  - 例: 「明日（6 月 24 日）の 24 時まで」
  - 例: 「3 日後（6 月 26 日）の 24 時まで」

### 2. Google Apps Script の設定

1. `reminder.js` の内容を Apps Script にコピー
2. `token` と `channelId` を設定
3. 以下の関数を順番に 1 回実行：
   - `setupPitchReminders()` - Pitch 会用リマインダー登録
   - `setupTrigger()` - 毎日実行のトリガー設定

## 使い方

### Pitch 会の場合

1. `リマインダー設定` に発表者 3 人を登録：

```
2025-07-15 | 田中太郎 | Pitch会
2025-07-15 | 佐藤花子 | Pitch会
2025-07-15 | 鈴木一郎 | Pitch会
```

2. 自動で以下が実行される：
   - 22 日前：初期資料提出リマインド（スレッド開始）
   - 14 日前：上司レビューリマインド（スレッド返信）
   - 7 日前：HR レビューリマインド（スレッド返信）
   - 2 日前：最終確認リマインド（スレッド返信）

### その他のリマインド

`リマインド文マスター` に新しいリマインダーを追加：

```
個人用 | 提出物リマインド | 7日前 | 📋 提出を{DEADLINE}にお願いします | #general
```

`リマインダー設定` に対象者を登録：

```
2025-08-01 | 山田太郎 | 提出物リマインド
```

## 機能

- **期日同じ人自動まとめ**: 同じ期日の人が自動的にグループ化される
- **スレッドリンク自動記録**: D列にSlackスレッドURLが自動で記録される
- **デフォルトチャンネル**: マスターでチャンネルを一元管理
- **セット・個別対応**: セット名または個別リマインダー名で設定可能
- **自動メンション**: 該当者に自動でメンション

## テスト

`testReminder()` 関数を実行してテスト可能